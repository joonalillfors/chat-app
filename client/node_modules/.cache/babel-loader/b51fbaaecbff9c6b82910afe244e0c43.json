{"ast":null,"code":"import _classCallCheck from \"/Users/joona/git/chat-app/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/joona/git/chat-app/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/joona/git/chat-app/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/joona/git/chat-app/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/joona/git/chat-app/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/joona/git/chat-app/client/src/components/messages.js\";\nimport React, { Component } from 'react';\n\nvar Messages =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Messages, _Component);\n\n  function Messages() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Messages);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Messages)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      key: 0\n    };\n    _this.height = 0;\n    _this.hasScrolled = true;\n\n    _this.getKey = function () {\n      _this.setState({\n        key: _this.state.key + 1\n      });\n\n      return _this.state.key;\n    };\n\n    return _this;\n  }\n\n  _createClass(Messages, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      // TODO dont scroll always\n      if (window.scrollY === this.height - window.innerHeight) {\n        window.scrollTo(0, document.body.scrollHeight);\n      }\n\n      this.height = document.body.scrollHeight;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var i = 0;\n      return React.createElement(\"ul\", {\n        id: \"messages\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 27\n        },\n        __self: this\n      }, this.props.messages.map(function (msg) {\n        return React.createElement(\"li\", {\n          key: i++,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 29\n          },\n          __self: this\n        }, msg);\n      }));\n    }\n  }]);\n\n  return Messages;\n}(Component);\n\nexport { Messages as default };","map":{"version":3,"sources":["/Users/joona/git/chat-app/client/src/components/messages.js"],"names":["React","Component","Messages","state","key","height","hasScrolled","getKey","setState","window","scrollY","innerHeight","scrollTo","document","body","scrollHeight","i","props","messages","map","msg"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;;IAEqBC,Q;;;;;;;;;;;;;;;;;UACnBC,K,GAAQ;AACNC,MAAAA,GAAG,EAAE;AADC,K;UAIRC,M,GAAS,C;UACTC,W,GAAc,I;;UAUdC,M,GAAS,YAAM;AACb,YAAKC,QAAL,CAAc;AAACJ,QAAAA,GAAG,EAAE,MAAKD,KAAL,CAAWC,GAAX,GAAe;AAArB,OAAd;;AACA,aAAO,MAAKD,KAAL,CAAWC,GAAlB;AACD,K;;;;;;;yCAXoB;AACnB;AACA,UAAIK,MAAM,CAACC,OAAP,KAAoB,KAAKL,MAAL,GAAYI,MAAM,CAACE,WAA3C,EAAyD;AACvDF,QAAAA,MAAM,CAACG,QAAP,CAAgB,CAAhB,EAAmBC,QAAQ,CAACC,IAAT,CAAcC,YAAjC;AACD;;AACD,WAAKV,MAAL,GAAcQ,QAAQ,CAACC,IAAT,CAAcC,YAA5B;AACD;;;6BAOS;AACR,UAAIC,CAAC,GAAG,CAAR;AACA,aACE;AAAI,QAAA,EAAE,EAAC,UAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKC,KAAL,CAAWC,QAAX,CAAoBC,GAApB,CAAwB,UAAAC,GAAG;AAAA,eAC1B;AAAI,UAAA,GAAG,EAAEJ,CAAC,EAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAeI,GAAf,CAD0B;AAAA,OAA3B,CADH,CADF;AAOD;;;;EA9BmCnB,S;;SAAjBC,Q","sourcesContent":["import React, {Component} from 'react'\n\nexport default class Messages extends Component {\n  state = {\n    key: 0,\n  }\n\n  height = 0\n  hasScrolled = true\n\n  componentDidUpdate() {\n    // TODO dont scroll always\n    if (window.scrollY === (this.height-window.innerHeight)) {\n      window.scrollTo(0, document.body.scrollHeight)\n    }\n    this.height = document.body.scrollHeight\n  }\n\n  getKey = () => {\n    this.setState({key: this.state.key+1})\n    return this.state.key\n  }\n\n  render () {\n    var i = 0\n    return (\n      <ul id='messages'>\n        {this.props.messages.map(msg => \n          <li key={i++}>{msg}</li>\n        )}\n      </ul>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}